(function(n,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.LeafCollapseTextarea={},n.Vue))})(this,function(n,e){"use strict";const _=t=>(e.pushScopeId("data-v-75ff37c3"),t=t(),e.popScopeId(),t),u={key:0,class:"text-button"},x=_(()=>e.createElementVNode("i",{class:"down-arrow"},null,-1)),m={key:1,class:"text-button"},w=_(()=>e.createElementVNode("i",{class:"up-arrow"},null,-1)),y=e.defineComponent({__name:"collapse-textarea",props:{width:null,lineHeight:null,defaultCollapseLine:null,content:null},setup(t){const{width:o="100%",lineHeight:c=20,defaultCollapseLine:r=3,content:d}=t,f=e.ref(null),a=e.ref(!0),i=e.ref(!1),g=e.ref(1e3),k=e.computed(()=>a.value?"leaf-textarea-expand":"leaf-textarea-collapse"),C=e.computed(()=>{let l="";return typeof o=="number"?l=`${o}%`:l=o,{"--leaf-text-width":l,"--leaf-text-line-height":c+"px","--leaf-text-hidden-line":r}});e.watch(()=>d,()=>{e.nextTick(()=>{E()})},{deep:!0,immediate:!0});function E(){var h;const l=window.innerWidth/375;if(!f.value)return;const p=(h=f.value)==null?void 0:h.offsetHeight;i.value=p>l*r*c,g.value=p,i&&(a.value=!1)}function N(){a.value=!a.value}return(l,p)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(e.unref(k)),style:e.normalizeStyle(e.unref(C)),onClick:N},[i.value?e.withDirectives((e.openBlock(),e.createElementBlock("span",u,[e.renderSlot(l.$slots,"down-arrow-content",{},()=>[e.createTextVNode(" 展开 "),x],!0)],512)),[[e.vShow,!a.value]]):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"content",ref_key:"contentRef",ref:f},e.toDisplayString(t.content),513),i.value?e.withDirectives((e.openBlock(),e.createElementBlock("span",m,[e.renderSlot(l.$slots,"up-arrow-content",{},()=>[e.createTextVNode(" 收起 "),w],!0)],512)),[[e.vShow,a.value]]):e.createCommentVNode("",!0)],6))}}),V="",s=((t,o)=>{const c=t.__vccOpts||t;for(const[r,d]of o)c[r]=d;return c})(y,[["__scopeId","data-v-75ff37c3"]]);s.install=t=>{t.component(s.__name,s)};const T=[s],S={install:t=>{T.forEach(o=>{t.component(o.__name,o)})}};n.CollapseTextarea=s,n.default=S,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
